import React, { useEffect, useState } from 'react';

import { DISTRICTS } from '@/modules/dictionary';

import styles from './map-scheme.module.css';

export type TProps = {
    onClick?: (district: string) => void;
    style?: React.CSSProperties;
    className?: string;
    onSelect?: (districts: string[]) => void;
    selectMany?: boolean;
};
export const MapScheme = ({ onClick, onSelect, selectMany = false, style, className }: TProps) => {
    const [selected, setSelected] = useState<string[]>([]);

    const select = (district: string) => {
        if (selectMany) {
            const existed = selected.find((item) => item === district);

            if (existed) {
                setSelected((s) => s.filter((item) => item !== district));
            } else {
                setSelected((s) => [...s, district]);
            }
        } else {
            setSelected([district]);
        }
    };

    const isDistrictSelected = (district: string) => !!selected.find((item) => item === district);

    const click = (district: string) => {
        if (onClick) {
            onClick(district);
        }
        select(district);
    };

    useEffect(() => {
        if (onSelect) onSelect(selected);
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [selected]);

    const { alatau, almaly, auezov, bostandyk, medeu, nauryzbay, turksib, zhetysu } = DISTRICTS;

    const defaultStyles = (district: string) =>
        `${styles.district} ${isDistrictSelected(district) ? styles.selected : ''}`;

    return (
        <div style={style} className={className}>
            <svg height='100%' viewBox='0 0 658 944' fill='none' xmlns='http://www.w3.org/2000/svg'>
                <path
                    d='M746.315 573.594L722.338 609.944L716.248 604.757L700.493 610.982L700.186 637.591L694.595 647.063L687.717 646.544L671.501 621.088L661.338 621.395L647.14 608.753L634.69 618.225L628.523 609.214L616.745 608.619L607.638 600.549L583.699 621.914L598.051 644.681L594.19 644.546L590.193 659.705L637.687 708.736L648.292 709.005L661.895 727.064L677.976 732.694L678.764 737.439L676.689 741.013H670.08L658.84 723.952L654.652 736.921L651.866 726.258L637.975 718.957L626.044 718.572L618.955 727.737L619.935 747.737L624.334 758.285L629.137 787.469L637.091 827.739L635.977 863.397L618.186 890.526L612.461 912.832L590.943 944.033L550.846 949.989L537.032 948.125L498.664 932.621L470.249 918.422L461.008 913.408L463.755 912.313L465.023 901.784L457.972 881.534L469.288 817.364L447.021 817.844L376.395 762.473L346.327 762.031L330.861 749.428L328.325 737.574L310.995 709.504L321.985 716.478L405.041 705.2L398.355 658.36L429.48 626.775L418.951 619.762L412.899 590.347L393.802 570.424L414.878 548.886L405.771 541.163L410.44 532.997V496.436L341.793 476.954L373.821 447.29L386.655 447.789L376.587 337.989L419.7 333.589L414.974 315.222L420.046 308.498V297.873L427.674 291.514L429.825 282.906L444.446 273.146L462.679 271.071L473.419 274.818L502.238 248.689L524.236 214.644L544.64 234.164L531.383 243.079L506.772 265.922L492.536 266.268L492.901 302.407L495.264 302.619L494.764 312.993L498.338 315.088L498.607 335.376L501.066 344.252L499.433 346.423L493.073 341.255L482.276 345.674L480.451 361.563L503.275 368.134L523.141 397.779L538.358 401.276L561.029 426.963L582.393 462.66L613.306 555.688L642.759 555.38L651.136 561.432L657.303 574.343L673.538 590.194L683.74 570.481L693.116 566.293L693.5 550.635L687.448 538.55V514.534L692.827 507.541L709.619 519.068L735.614 522.853L745.777 552.575L746.315 573.594Z'
                    className={defaultStyles(medeu)}
                    onClick={() => click(medeu)}
                />
                <path
                    d='M464.389 821.571L453.86 881.303L443.793 880.842L435.935 890.333L436.857 899.094L423.178 888.777L382.101 930.142L372.456 931.218L372.111 921.208L411.612 885.703V867.662L406.77 854.636L399.335 840.015L386.309 816.71L366.789 808.526L341.947 804.434L299.833 803.838L296.586 780.379L280.389 733.635L263.194 724.547L236.104 719.783L198.909 720.071L180.561 716.055L187.631 715.21L208.188 699.513L242.348 686.91L236.758 665.987L254.126 643.355L256.527 631.328L260.946 625.794V615.439L253.511 601.702L242.944 594.113L231.82 579.069L242.444 578.8L228.65 552.729L222.406 532.517L236.854 520.24L229.822 507.425L261.023 499.356L260.428 486.695L263.694 470.94L261.042 460.911L235.835 431.593L248.208 421.525L378.95 408.634L382.14 443.505L372.284 443.14L333.647 478.894L406.348 499.548V531.902L400.526 542.066L408.884 549.174L388.096 570.385L409.114 592.326L415.281 622.24L423.082 627.447L394.013 656.919L400.392 701.684L322.926 712.213L305.673 701.281L302.83 704.086L324.463 739.111L327.153 751.695L344.829 766.123L374.954 766.546L445.657 821.975L464.389 821.571Z'
                    className={defaultStyles(bostandyk)}
                    onClick={() => click(bostandyk)}
                />
                <path
                    d='M327.172 151.281V159.638L303.022 204.25L278.449 268.977L267.748 307.422L268.036 361.16L258.852 364.637L231.647 364.368L224.577 365.732L223.693 365.905L221.848 368.46L209.495 380.833L196.449 383.12L172.434 397.01L121.27 416.569L121.213 416.454L99.1181 429.537L80.7893 433.764L61.6342 395.185L79.5019 384.849L91.164 395.512L98.119 382.985L86.3801 372.188L87.0717 366.232L93.2583 361.505L85.9574 346.865L107.053 333.455L103.133 295.395L90.9335 287.71L83.1716 295.472L22.5941 267.978L19.7122 253.55L9.51028 249.361L0 226.172L17.0608 219.812L26.3598 231.436L52.7772 219.658L72.8736 214.01L78.4645 198.486L87.5713 188.899L108.263 188.592L117.332 149.936L129.513 138.043L129.071 124.594L145.92 130.147H161.501L168.918 125.593L186.728 126.035L186.958 136.813L197.16 145.805L190.897 152.356L199.216 157.582L195.239 163.154V180.791L203.116 188.668L221.042 182.559L225.537 166.689L224.999 151.895L231.57 142.231L240.619 142.443L248.535 150.358L248.304 159.081L237.891 186.862L256.239 197.89L262.233 184.557L275.24 184.249L275.932 167.784L283.886 155.872L290.438 155.623L302.446 147.227L327.172 151.281Z'
                    className={defaultStyles(alatau)}
                    onClick={() => click(alatau)}
                />
                <path
                    d='M624.141 77.4462L560.24 120.425V133.297L555.091 135.929L548.597 126.323L527.117 143.999L547.444 165.805L519.528 210.129L521.219 211.762L499.278 245.845L472.477 270.149L463.139 266.902L443.004 269.188L428.883 278.603L406.366 276.451L399.526 278.161L385.232 273.626L379.526 274.049L371.13 277.892H357.566L347.518 260.37L352.398 144.037L362.177 131.472L366.557 111.587L374.588 110.53L375.299 108.033L383.637 106.688L392.398 95.5446L391.476 83.8633L402.197 78.0802L418.893 69.7419L414.032 62.2298L414.839 54.4679L445.118 29.9526L445.425 10.7975L453.936 0L454.321 6.49388L472.4 13.4489H476.992L477.51 24.6691L504.619 33.7951V40.9614L498.03 49.8568L498.337 115.833L519.317 106.073L548.155 115.391L601.259 76.8698L624.026 72.9697L624.141 77.4462Z'
                    className={defaultStyles(turksib)}
                    onClick={() => click(turksib)}
                />
                <path
                    d='M256.854 616.476V624.353L252.704 629.541L250.283 641.626L232.281 665.084L237.41 684.355L206.478 695.767L186.017 711.271L168.629 713.346L161.482 697.611L130.819 691.771L115.41 687.928L106.227 672.308V634.843L95.3521 622.874H69.3958L67.782 619.627L78.1377 617.61L80.5008 609.464L83.9206 606.409H96.7547L89.108 584.871L94.5068 585.083L91.2215 538.511L79.7515 524.352L70.4717 522.296L65.9568 505.485L56.312 480.758L56.1968 476.627L68.2239 476.896L69.1077 453.803L55.6589 453.476L52.0469 444.139L81.154 437.779L81.1924 437.875L100.347 433.456L119.426 422.294L128.994 442.755L141.635 454.552L151.53 476.608L164.633 492.094L165.19 504.985L171.665 520.701L181.924 525.85L186.785 519.376L189.475 526.35L202.059 524.697L202.347 533.631H218.467L224.788 554.131L235.72 574.862L223.827 575.15L240.023 597.071L250.36 604.488L256.854 616.476Z'
                    className={defaultStyles(nauryzbay)}
                    onClick={() => click(nauryzbay)}
                />
                <path
                    d='M425.714 282.426L424.004 289.208L415.935 295.952V307.134L410.517 314.338L414.533 329.997L374.455 334.089V334.07L334.55 336.664L305.462 344.195L272.128 359.354L271.859 307.979L282.33 270.245L306.692 206.075L331.265 160.676V147.784L304.175 143.365L306.02 138.6L316.855 138.005L324.886 110.857L334.262 100.041H348.941L361.986 74.5453L374.801 64.7469L387.712 64.5164L398.279 75.5444L387.174 81.5195L388.173 94.2767L381.41 102.903L372.073 104.383L371.381 106.823L363.177 107.899L358.374 129.686L348.364 142.539L343.369 261.388L355.204 282.004H372.015L380.565 278.084L384.734 277.777L399.393 282.426L406.694 280.601L425.714 282.426Z'
                    className={defaultStyles(zhetysu)}
                    onClick={() => click(zhetysu)}
                />
                <path
                    d='M378.568 404.541L246.577 417.568L233.839 427.942L233.051 418.432L224.598 407.404L222.119 388.787L223.848 372.706L226.077 369.632L232.014 368.479L259.584 368.748L268.057 365.54V365.713L270.439 364.637L271.611 364.176L271.592 364.099L306.655 348.114L335.013 340.736L372.516 338.316L378.568 404.541Z'
                    className={defaultStyles(almaly)}
                    onClick={() => click(almaly)}
                />
                <path
                    d='M256.777 496.224L223.673 504.774L231.647 519.28L219.581 529.539H206.324L206.017 520.048L192.145 521.873L187.938 510.999L180.695 520.644L174.854 517.723L169.244 504.101L168.668 490.518L155.161 474.668L145.036 452.112L132.356 440.296L122.999 420.277L174.047 400.776L197.871 387.039L211.473 384.637L219.274 376.837L218.006 388.845L220.676 409.037L229.053 419.969L229.994 431.074V431.209L230.09 431.189L257.315 462.871L259.486 471.056L256.316 486.368L256.777 496.224Z'
                    className={defaultStyles(auezov)}
                    onClick={() => click(auezov)}
                />
            </svg>
        </div>
    );
};
